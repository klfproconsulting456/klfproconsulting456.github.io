<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KLFPRO Consulting • Loan Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        /* ================= Global Styles ================= */
        * { margin:0; padding:0; box-sizing:border-box; scroll-behavior:smooth; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#fff8f0; color:#000; overflow-x:hidden; line-height:1.6; }
        a { text-decoration:none; color:inherit; transition: all 0.3s ease; }
        img { max-width:100%; display:block; }
        .container { max-width:1200px; margin:0 auto; padding:0 20px; }
        section { padding: 60px 0; }
        h2 { font-size: 2.5rem; margin-bottom: 20px; color: #f59e0b; text-align: center; }
        p { font-size: 1.1rem; margin-bottom: 15px; }

        /* ================= NAVIGATION ================= */
        .nav { background:#fff8f0; border-bottom:1px solid #f3e8df; padding:8px 0; position:sticky; top:0; z-index:1000; transition: all 0.3s ease; }
        .nav.scrolled { background:rgba(255,248,240,0.95); backdrop-filter: blur(10px); box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        .nav-inner { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }
        .nav .logo { display:flex; align-items:center; gap:0; font-weight:700; color:#000; font-size: 1.3rem; }
        .nav .logo img { width:70px; height:70px; border-radius:50%; margin-right: -8px; }
        .nav .menu { display:flex; gap:25px; align-items:center; }
        .nav .menu a { padding:8px 4px; font-weight:600; color:#000; position:relative; font-size: 1.05rem; }
        .nav .menu a::after { content:''; position:absolute; bottom:0; left:0; width:0; height:2px; background:linear-gradient(90deg,#f59e0b,#fbbf24); transition:width 0.3s ease; }
        .nav .menu a.active::after, .nav .menu a:hover::after { width:100%; }
        .nav .menu a.active { color:#f59e0b; }
        .nav .menu a:hover { color:#fbbf24; }
        .nav .cta { background:linear-gradient(135deg,#f59e0b,#fbbf24); color:#000; padding:10px 25px; border-radius:8px; font-weight:700; transition: transform 0.3s, box-shadow 0.3s; margin-left: 15px; }
        .nav .cta:hover { transform:translateY(-3px); box-shadow:0 6px 18px rgba(245,158,11,0.4); }

        /* ================= NEWS TICKER ================= */
        .news-ticker-container {
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            color: white;
            padding: 12px 0;
            overflow: hidden;
            position: relative;
            border-bottom: 1px solid #333;
        }

        .news-ticker-header {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f59e0b;
            color: #000;
            padding: 8px 15px;
            font-weight: 700;
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            z-index: 10;
            box-shadow: 2px 0 5px rgba(0,0,0,0.2);
        }

        .news-ticker {
            display: flex;
            align-items: center;
            white-space: nowrap;
            padding-left: 120px;
        }

        .ticker-content {
            display: flex;
            animation: ticker-scroll 40s linear infinite;
        }

        .news-item {
            display: flex;
            align-items: center;
            padding: 0 30px;
            border-right: 1px solid #444;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .news-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .news-category {
            background: #f59e0b;
            color: #000;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-right: 10px;
            text-transform: uppercase;
        }

        .news-text {
            font-size: 0.9rem;
        }

        .news-time {
            color: #fbbf24;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        @keyframes ticker-scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .news-ticker:hover .ticker-content {
            animation-play-state: paused;
        }

        /* Tiny EMI Calculator Icon */
        .emi-calculator-icon {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg,#f59e0b,#fbbf24);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(245,158,11,0.4);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .emi-calculator-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(245,158,11,0.6);
        }

        /* Hamburger Menu */
        .hamburger { display:none; flex-direction: column; cursor:pointer; }
        .hamburger div { width:25px; height:3px; background:#000; margin:4px 0; transition: all 0.3s ease; }

        /* ================= HERO ================= */
        .hero { position:relative; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1554224155-6726b3ff858f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover no-repeat; padding:150px 20px 100px; text-align:center; color:#fff; margin:20px 0; border-radius: 12px; }
        .hero-content { max-width: 800px; margin: 0 auto; }
        .hero h1 { font-size:3.2rem; margin-bottom:20px; font-weight:700; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .hero p { font-size:1.3rem; margin-bottom:30px; opacity: 0.9; }
        .hero-cta { display:inline-block; background:linear-gradient(135deg,#f59e0b,#fbbf24); color:#000; padding:14px 35px; border-radius:8px; font-weight:700; font-size:1.1rem; margin-top:20px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(245,158,11,0.4); }
        .hero-cta:hover { transform:translateY(-3px); box-shadow:0 8px 25px rgba(245,158,11,0.6); }

        /* ================= SERVICES ================= */
        .services-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; margin-top: 40px; }
        .service-card { background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.08); transition: all 0.4s ease; }
        .service-card:hover { transform:translateY(-10px); box-shadow:0 15px 40px rgba(0,0,0,0.12); }
        .service-card img { width:100%; height:200px; object-fit:cover; }
        .service-card-content { padding:25px; }
        .service-card h3 { color:#f59e0b; margin-bottom:15px; font-size:1.4rem; }
        .service-card ul { list-style:none; padding:0; }
        .service-card li { margin-bottom:10px; padding-left:25px; position:relative; }
        .service-card li:before { content:'✓'; color:#f59e0b; font-weight:bold; position:absolute; left:0; }

        /* ================= PARTNERS ================= */
        .partners { background: #f9f5f0; padding: 50px 0; }
        .partners-logos { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 40px; margin-top: 30px; }
        
        /* Make logos circular with floating animation */
        .partner-logo {
            width: 120px;
            height: 120px;
            border-radius: 50%;       /* circle shape */
            object-fit: contain;      /* keep original logo aspect */
            background: #fff;         /* white background circle */
            padding: 15px;            /* spacing inside circle */
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            opacity: 0;
            transform: translateX(-100px); /* start off-screen left */
            transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
            filter: none !important;
        }

        /* Train entry + floating */
        .partner-logo.show {
            opacity: 1;
            transform: translateX(0);
            animation: floatWave 4s ease-in-out infinite;
        }

        /* Floating + waving */
        @keyframes floatWave {
            0%   { transform: translateY(0px) rotate(0deg); }
            25%  { transform: translateY(-6px) rotate(1deg); }
            50%  { transform: translateY(0px) rotate(0deg); }
            75%  { transform: translateY(6px) rotate(-1deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        /* Safety: remove hover changes */
        .partner-logo:hover {
            filter: none !important;
            transform: none !important;
            opacity: 1 !important;
        }

        /* ================= HOW IT WORKS ================= */
        .process-steps { display: flex; justify-content: space-between; flex-wrap: wrap; margin-top: 50px; position: relative; }
        .process-step { flex: 1; min-width: 220px; text-align: center; padding: 20px; position: relative; z-index: 2; }
        .process-step-number { display:inline-block; width:70px; height:70px; line-height:70px; border-radius:50%; background:linear-gradient(135deg,#f59e0b,#fbbf24); color:#000; font-weight:bold; margin-bottom:15px; font-size:1.8rem; box-shadow:0 5px 15px rgba(245,158,11,0.3); }
        .process-step h3 { color:#f59e0b; margin-bottom:10px; font-size:1.3rem; }
        .process-step p { color:#000; font-size:1rem; }

        /* ================= BENEFITS ================= */
        .benefits-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:30px; margin-top: 40px; }
        .benefit-card { background:#fff; padding:30px 25px; border-radius:12px; text-align:center; box-shadow:0 10px 30px rgba(0,0,0,0.08); transition: all 0.4s ease; }
        .benefit-card:hover { transform:translateY(-10px); box-shadow:0 15px 40px rgba(0,0,0,0.12); }
        .benefit-card i { font-size:3rem; margin-bottom:20px; background:linear-gradient(135deg,#f59e0b,#fbbf24); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; color: #f59e0b; }
        .benefit-card h3 { color:#f59e0b; margin-bottom:15px; font-size:1.3rem; }
        .benefit-card p { color:#000; }

        /* ================= TESTIMONIALS ================= */
        .testimonials { background: #f9f5f0; }
        .testimonials-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:30px; margin-top: 40px; }
        .testimonial-card { background:#fff; padding:30px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.08); position: relative; }
        .testimonial-card:before { content: '"'; font-size: 5rem; color: #f3e8df; position: absolute; top: 10px; right: 20px; line-height: 1; }
        .testimonial-content { margin-bottom: 20px; font-style: italic; }
        .testimonial-author { display: flex; align-items: center; }
        .testimonial-author img { width: 50px; height: 50px; border-radius: 50%; margin-right: 15px; object-fit: cover; }
        .author-info h4 { color: #f59e0b; margin-bottom: 5px; }
        .author-info p { font-size: 0.9rem; opacity: 0.7; margin: 0; }

        /* ================= EMI CALCULATOR MODAL ================= */
        .emi-calculator-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }

        .emi-calculator-container {
            background: #fff;
            max-width: 1000px;
            margin: 30px auto;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            position: relative;
        }

        .calculator-header {
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .calculator-header h2 {
            color: #fbbf24;
            margin: 0;
            text-align: left;
            font-size: 1.6rem;
        }

        .close-calculator {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.3rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-calculator:hover {
            color: #f59e0b;
        }

        .calculator-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }

        .calculator-form {
            padding: 25px;
            background: #f9f9f9;
        }

        .calculator-result {
            padding: 25px;
            background: #fff;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input[type="range"] {
            width: 100%;
            height: 6px;
            background: #ddd;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        .form-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: #f59e0b;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-group input[type="range"]::-webkit-slider-thumb:hover {
            background: #fbbf24;
            transform: scale(1.1);
        }

        .input-with-unit {
            position: relative;
        }

        .input-with-unit input {
            width: 100%;
            padding: 10px 35px 10px 12px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            color: #333;
            font-size: 14px;
        }

        .input-with-unit .unit {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #f59e0b;
            font-weight: 600;
        }

        .value-display {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.85rem;
            color: #666;
        }

        .emi-amount {
            font-size: 2rem;
            font-weight: 700;
            color: #f59e0b;
            margin: 15px 0;
            text-align: center;
        }

        .breakdown {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .breakdown-item {
            background: #f9f5f0;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
        }

        .breakdown-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: #f59e0b;
            margin-top: 5px;
        }

        .calculate-btn {
            width: 100%;
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: #000;
            border: none;
            padding: 12px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(245,158,11,0.4);
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }

        .download-btn {
            flex: 1;
            background: #1a1a1a;
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 0.9rem;
        }

        .download-btn:hover {
            background: #333;
            transform: translateY(-2px);
        }

        .reset-btn {
            flex: 1;
            background: #f0f0f0;
            color: #333;
            border: none;
            padding: 10px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 0.9rem;
        }

        .reset-btn:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .amortization-table {
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 6px;
        }

        .amortization-table h4 {
            background: #f9f5f0;
            padding: 12px;
            margin: 0;
            color: #f59e0b;
            text-align: center;
            font-size: 1rem;
        }

        .amortization-table table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .amortization-table th {
            background: #f5f5f5;
            padding: 10px 8px;
            text-align: center;
            font-weight: 600;
            color: #333;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
        }

        .amortization-table td {
            padding: 8px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }

        .amortization-table tr:nth-child(even) {
            background: #f9f9f9;
        }

        .year-separator {
            background: #f59e0b !important;
            color: white;
            font-weight: bold;
        }

        /* ================= CTA SECTION ================= */
        .cta-section { text-align: center; background: linear-gradient(135deg,#f59e0b,#fbbf24); color: #000; padding: 70px 20px; border-radius: 12px; }
        .cta-section h2 { color: #000; margin-bottom: 15px; }
        .cta-section p { font-size: 1.2rem; margin-bottom: 30px; max-width: 700px; margin-left: auto; margin-right: auto; }
        .cta-buttons { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .cta-button { display:inline-block; padding:14px 35px; border-radius:8px; font-weight:700; font-size:1.1rem; transition: all 0.3s ease; }
        .cta-button.primary { background:#000; color: #fff; }
        .cta-button.secondary { background:transparent; color: #000; border: 2px solid #000; }
        .cta-button:hover { transform:translateY(-3px); box-shadow:0 8px 25px rgba(0,0,0,0.2); }

        /* ================= FOOTER ================= */
        footer { background:#1a1a1a; color:#fff; padding:60px 0 30px; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer-column h3 { color: #f59e0b; margin-bottom: 20px; font-size: 1.3rem; }
        .footer-column ul { list-style: none; }
        .footer-column ul li { margin-bottom: 10px; }
        .footer-column a { color: #ccc; transition: color 0.3s ease; }
        .footer-column a:hover { color: #f59e0b; }
        .footer-bottom { text-align: center; padding-top: 30px; border-top: 1px solid #333; color: #999; font-size: 0.9rem; }
        .social-links { display: flex; gap: 15px; margin-top: 20px; }
        .social-links a { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: #333; color: #fff; transition: all 0.3s ease; }
        .social-links a:hover { background: #f59e0b; transform: translateY(-3px); }

        /* ================= MEDIA QUERIES ================= */
        @media(max-width:1024px) { 
            .services-grid, .benefits-grid, .testimonials-grid { grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); } 
            .calculator-content { grid-template-columns: 1fr; }
        }
        @media(max-width:768px) { 
            .nav .menu { display:none; width:100%; flex-direction:column; background:#fff8f0; position:absolute; top:70px; left:0; padding:20px; border-top:1px solid #f3e8df; box-shadow:0 5px 10px rgba(0,0,0,0.05); } 
            .hamburger { display:flex; }
            .hero h1 { font-size: 2.5rem; }
            .hero p { font-size: 1.1rem; }
            .process-steps { flex-direction: column; }
            .process-step { margin-bottom: 30px; }
            .cta-buttons { flex-direction: column; align-items: center; }
            .cta-button { width: 100%; max-width: 300px; text-align: center; }
            .calculator-form, .calculator-result { padding: 20px; }
            .emi-amount { font-size: 1.8rem; }
            .breakdown { grid-template-columns: 1fr; }
            .action-buttons { flex-direction: column; }
            .emi-calculator-icon {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            .news-ticker-header {
                position: relative;
                width: 100%;
                justify-content: center;
                margin-bottom: 10px;
            }
            .news-ticker {
                padding-left: 0;
            }
            .ticker-content {
                animation: ticker-scroll 30s linear infinite;
            }
        }

        /* Animation Classes */
        .fade-in { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
        .fade-in.show { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body>
    <!-- ================= NAVIGATION ================= -->
    <div class="nav" id="nav">
        <div class="nav-inner container">
            <a class="logo" href="index.html">
                <img src="assets/klflogos-removebg-preview.png" alt="KLFPRO Logo">
                <span>KLFPRO CONSULTING</span>
            </a>
            <div class="menu">
                <a href="pages/services.html">Services</a>
                <a href="#partners">Bank Partners</a>
                <a href="#how-it-works">How It Works</a>
                <a href="pages/careers.html">Careers</a>
                <a href="#testimonials">Testimonials</a>
                <a href="pages/contact.html">Contact</a>
                <a class="cta" href="pages/apply.html">Apply Now</a>
            </div>
            <div class="hamburger" id="hamburger">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
    </div>

    <!-- ================= NEWS TICKER ================= -->
    <div class="news-ticker-container">
        <div class="news-ticker-header">
            <i class="fas fa-bullhorn"></i>
            <span style="margin-left: 8px;">LATEST NEWS</span>
        </div>
        <div class="news-ticker">
            <div class="ticker-content" id="ticker-content">
                <!-- News items will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Tiny EMI Calculator Icon -->
    <div class="emi-calculator-icon" id="emi-calculator-icon">
        <i class="fas fa-calculator"></i>
    </div>

    <!-- ================= HERO ================= -->
    <section class="hero fade-in">
        <div class="hero-content">
            <h1>Simplifying Loan Access Between Banks & Customers</h1>
            <p>KLFPRO connects borrowers with the best loan options from our extensive network of banking partners</p>
            <a href="pages/apply.html" class="hero-cta">Get Your Loan Today</a>
        </div>
    </section>

    <!-- ================= SERVICES ================= -->
    <section id="services" class="container fade-in">
        <h2>Our Comprehensive Loan Services</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 30px;">We specialize in connecting customers with the perfect loan products from our extensive network of partner banks</p>
        
        <div class="services-grid">
            <!-- Home Loan -->
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Home Loan">
                <div class="service-card-content">
                    <h3>Home Loans</h3>
                    <ul>
                        <li>Best interest rates from top banks</li>
                        <li>Flexible repayment tenure up to 30 years</li>
                        <li>Quick approval process</li>
                        <li>Expert guidance throughout</li>
                    </ul>
                </div>
            </div>
            
            <!-- Business Loan -->
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Business Loan">
                <div class="service-card-content">
                    <h3>Business Loans</h3>
                    <ul>
                        <li>Funding for startups and established businesses</li>
                        <li>Competitive interest rates</li>
                        <li>Minimal documentation</li>
                        <li>Customized loan solutions</li>
                    </ul>
                </div>
            </div>
            
            <!-- Personal Loan -->
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Personal Loan">
                <div class="service-card-content">
                    <h3>Personal Loans</h3>
                    <ul>
                        <li>Instant approval for eligible applicants</li>
                        <li>No collateral required</li>
                        <li>Flexible repayment options</li>
                        <li>Disbursal within 24 hours</li>
                    </ul>
                </div>
            </div>
            
            <!-- Loan Against Property -->
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Loan Against Property">
                <div class="service-card-content">
                    <h3>Loan Against Property</h3>
                    <ul>
                        <li>High-value loans against residential/commercial property</li>
                        <li>Up to 70% of property value</li>
                        <li>Long repayment tenure</li>
                        <li>Competitive interest rates</li>
                    </ul>
                </div>
            </div>
            
            <!-- Car Loan -->
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1580273916550-e323be2ae537?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Car Loan">
                <div class="service-card-content">
                    <h3>Car Loans</h3>
                    <ul>
                        <li>100% on-road funding available</li>
                        <li>Quick processing & approval</li>
                        <li>Flexible EMI options</li>
                        <li>New & used car financing</li>
                    </ul>
                </div>
            </div>
            
            <!-- MSME Loan -->
            <div class="service-card">
                <img src="assets/images/MSME LOAN.jpg" alt="MSME LOAN">
                <div class="service-card-content">
                    <h3>MSME LOAN</h3>
                    <ul>
                        <li>Special schemes for small businesses</li>
                        <li>Collateral-free loans up to ₹50 lakhs</li>
                        <li>Subsidized interest rates</li>
                        <li>Quick disbursal for working capital</li>
                    </ul>
                </div>
            </div>
            
            <!-- Loan Against Virtual Unit -->
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1633158829585-23ba8f7c8caf?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Loan Against Virtual Unit">
                <div class="service-card-content">
                    <h3>Loan Against Virtual Unit</h3>
                    <ul>
                        <li>Financing for digital businesses</li>
                        <li>Collateral against digital assets</li>
                        <li>Quick online processing</li>
                        <li>Flexible repayment terms</li>
                    </ul>
                </div>
            </div>
            
            <!-- COMMERSIAL -->
            <div class="service-card">
                <img src="assets/images/commercial property loan.jpg" alt="Commercial property loan">
                <div class="service-card-content">
                    <h3>Commercial property loan</h3>
                    <ul>
                        <li>Study in India or abroad</li>
                        <li>Coverage for tuition & living expenses</li>
                        <li>Moratorium period available</li>
                        <li>Tax benefits under Section 80E</li>
                    </ul>
                </div>
            </div>
             <!-- Loan Against Virtual Unit -->
            <div class="service-card">
                <img src="assets/images/LAIP.jpg" alt="Loan Against Industrial Property">
                <div class="service-card-content">
                    <h3>Loan Against Industrial Property</h3>
                    <ul>
                        <li>Financing for digital businesses</li>
                        <li>Collateral against digital assets</li>
                        <li>Quick online processing</li>
                        <li>Flexible repayment terms</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- EMI Calculator Modal -->
    <div class="emi-calculator-modal" id="emi-calculator-modal">
        <div class="emi-calculator-container">
            <div class="calculator-header">
                <h2>EMI Calculator</h2>
                <button class="close-calculator" id="close-calculator">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="calculator-content">
                <div class="calculator-form">
                    <div class="form-group">
                        <label for="loan-amount">Loan Amount</label>
                        <div class="input-with-unit">
                            <input type="range" id="loan-amount" min="50000" max="20000000" step="50000" value="1000000">
                            <span class="unit">₹</span>
                        </div>
                        <div class="value-display">
                            <span>₹50,000</span>
                            <span id="loan-amount-value">₹10,00,000</span>
                            <span>₹2 Cr</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="interest-rate">Interest Rate (% per annum)</label>
                        <div class="input-with-unit">
                            <input type="range" id="interest-rate" min="5" max="30" step="0.1" value="8.5">
                            <span class="unit">%</span>
                        </div>
                        <div class="value-display">
                            <span>5%</span>
                            <span id="interest-rate-value">8.5%</span>
                            <span>30%</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="loan-tenure">Loan Tenure (Years)</label>
                        <div class="input-with-unit">
                            <input type="range" id="loan-tenure" min="1" max="30" step="1" value="15">
                            <span class="unit">Years</span>
                        </div>
                        <div class="value-display">
                            <span>1 Year</span>
                            <span id="loan-tenure-value">15 Years</span>
                            <span>30 Years</span>
                        </div>
                    </div>
                    
                    <button class="calculate-btn" id="calculate-emi">
                        <i class="fas fa-calculator"></i> Calculate EMI
                    </button>
                    
                    <div class="action-buttons">
                        <button class="download-btn" id="download-pdf">
                            <i class="fas fa-download"></i> Download PDF
                        </button>
                        <button class="reset-btn" id="reset-calculator">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                </div>
                
                <div class="calculator-result">
                    <h3 style="color: #f59e0b; margin-bottom: 20px; text-align: center;">Your EMI Breakdown</h3>
                    
                    <div class="emi-amount" id="emi-result">₹9,847</div>
                    <p style="color: #666; margin-bottom: 20px; text-align: center;">Monthly Payment</p>
                    
                    <div class="breakdown">
                        <div class="breakdown-item">
                            <div>Total Interest</div>
                            <div class="breakdown-value" id="total-interest">₹7,72,460</div>
                        </div>
                        <div class="breakdown-item">
                            <div>Total Amount</div>
                            <div class="breakdown-value" id="total-amount">₹17,72,460</div>
                        </div>
                    </div>
                    
                    <div class="amortization-table">
                        <h4>Complete Payment Schedule</h4>
                        <table id="amortization-table">
                            <thead>
                                <tr>
                                    <th>Year</th>
                                    <th>Month</th>
                                    <th>Principal</th>
                                    <th>Interest</th>
                                    <th>Balance</th>
                                </tr>
                            </thead>
                            <tbody id="amortization-body">
                                <!-- Amortization data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ================= PARTNERS ================= -->
    <section id="partners" class="partners">
        <div class="container">
            <h2>Our Banking Partners</h2>
            <p style="text-align: center; max-width: 800px; margin: 0 auto;">
                We work with leading financial institutions to bring you the best loan options
            </p>

            <div class="partners-logos">
                <img src="assets/BANK-LOGOS/HDFC.png" alt="HDFC BANK" class="partner-logo">
                <img src="assets/BANK-LOGOS/ICICI.png" alt="ICICI BANK" class="partner-logo">
                <img src="assets/BANK-LOGOS/SBI.png" alt="SBI BANK" class="partner-logo">
                <img src="assets/BANK-LOGOS/kotak.png" alt="KOTAK BANK" class="partner-logo">
                <img src="assets/BANK-LOGOS/BOM.png" alt="BOM" class="partner-logo">
                <img src="assets/BANK-LOGOS/bajaj.png" alt="Bajaj BANK" class="partner-logo">
                <img src="assets/BANK-LOGOS/PNB.png" alt="PNB BANK" class="partner-logo">
            </div>
        </div>
    </section>

    <!-- ================= HOW IT WORKS ================= -->
    <section id="how-it-works" class="container fade-in">
        <h2>How It Works</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 30px;">Our simple 4-step process makes getting a loan hassle-free</p>
        
        <div class="process-steps">
            <div class="process-step">
                <div class="process-step-number">1</div>
                <h3>Submit Application</h3>
                <p>Fill out our simple online form with your basic details and loan requirements</p>
            </div>
            <div class="process-step">
                <div class="process-step-number">2</div>
                <h3>Document Verification</h3>
                <p>Our experts verify your documents and eligibility across multiple banks</p>
            </div>
            <div class="process-step">
                <div class="process-step-number">3</div>
                <h3>Get Best Offers</h3>
                <p>Receive customized loan offers from our partner banks with competitive rates</p>
            </div>
            <div class="process-step">
                <div class="process-step-number">4</div>
                <h3>Loan Disbursal</h3>
                <p>Choose your preferred offer and get funds transferred to your account</p>
            </div>
        </div>
    </section>

    <!-- ================= BENEFITS ================= -->
    <section id="benefits" class="container fade-in">
        <h2>Why Choose KLFPRO</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 30px;">We make the loan process simpler, faster, and more transparent</p>
        
        <div class="benefits-grid">
            <div class="benefit-card">
                <i class="fas fa-balance-scale"></i>
                <h3>Best Rates Guaranteed</h3>
                <p>We compare offers from multiple banks to ensure you get the most competitive interest rates</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-bolt"></i>
                <h3>Fast Processing</h3>
                <p>Our streamlined process ensures quick approval and disbursal of your loan</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-shield-alt"></i>
                <h3>Secure & Confidential</h3>
                <p>Your personal and financial information is protected with bank-level security</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-headset"></i>
                <h3>Expert Support</h3>
                <p>Our loan specialists guide you at every step and answer all your queries</p>
            </div>
        </div>
    </section>

    <!-- ================= TESTIMONIALS ================= -->
    <section id="testimonials" class="testimonials fade-in">
        <div class="container">
            <h2>What Our Customers Say</h2>
            <p style="text-align: center; max-width: 800px; margin: 0 auto 30px;">Hear from borrowers who found their perfect loan through KLFPRO</p>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "KLFPRO helped me secure a home loan with an interest rate 0.5% lower than what I was offered directly. Their service was exceptional throughout the process."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-info">
                            <h4>Rajesh Kumar</h4>
                            <p>Home Loan Customer</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "As a small business owner, I needed quick funding. KLFPRO connected me with the right bank and my loan was approved in just 3 days. Highly recommended!"
                    </div>
                    <div class="testimonial-author">
                        <div class="author-info">
                            <h4>Priya Sharma</h4>
                            <p>Business Loan Customer</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "The team at KLFPRO made the entire loan process so simple. They handled all the paperwork and negotiations with banks. I couldn't have asked for a better experience."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-info">
                            <h4>Anil Patel</h4>
                            <p>Personal Loan Customer</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ================= CTA SECTION ================= -->
    <section class="cta-section fade-in">
        <div class="container">
            <h2>Ready to Find Your Perfect Loan?</h2>
            <p>Join thousands of satisfied customers who have secured their loans through KLFPRO's banking network</p>
            <div class="cta-buttons">
                <a href="pages/apply.html" class="cta-button primary">Apply Now</a>
                <a href="pages/contact.html" class="cta-button secondary">Speak to an Expert</a>
            </div>
        </div>
    </section>

    <!-- ================= FOOTER ================= -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>KLFPRO Consulting</h3>
                    <p>Connecting borrowers with the best loan options from our extensive network of banking partners since 2015.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="pages/about.html">About</a></li>
                        <li><a href="pages/policy.html">Policy</a></li>
                        <li><a href="pages/terms.html">Terms</a></li>
                        <li><a href="pages/careers.html">Careers</a></li>
                        <li><a href="#testimonials">Testimonials</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i>OFFICE NO.1142, SAPZE ITECH PARK, GURUGAON</li>
                        <li><i class="fas fa-phone"></i> 0124-4068700</li>
                        <li><i class="fas fa-envelope"></i> info@klfpro.com</li>
                        <li><i class="fas fa-clock"></i> Mon-Sat: 9AM - 6PM</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 KLFPRO Consulting. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
            </div>
        </div>
    </footer>

    <script>
        // SMART AI-POWERED INDIAN HOUSING LOAN NEWS TICKER
        class SmartLoanNewsTicker {
            constructor() {
                this.newsSources = [
                    { name: 'BLOOMBERG', url: 'https://feeds.bloomberg.com/markets/news.rss', priority: 1 },
                    { name: 'CNBC', url: 'https://search.cnbc.com/rs/search/combinedcms/view.xml?partnerId=wrss01&id=100003114', priority: 1 },
                    { name: 'REUTERS INDIA', url: 'https://www.reutersagency.com/feed/?best-topics=business-finance&post_type=best', priority: 2 },
                    { name: 'ECONOMIC TIMES', url: 'https://economictimes.indiatimes.com/markets/rssfeeds/1977021501.cms', priority: 1 },
                    { name: 'MINT', url: 'https://www.livemint.com/rss/money', priority: 2 }
                ];
                
                this.loanKeywords = this.generateIndianLoanKeywords();
                this.cacheKey = 'smart_loan_news_cache';
                this.cacheTimeKey = 'smart_loan_news_time';
            }

            // Focused Indian Loan Sector Keywords
            generateIndianLoanKeywords() {
                return {
                    primary: [
                        'housing loan', 'home loan', 'mortgage', 'real estate loan', 'property loan',
                        'rbi', 'reserve bank of india', 'interest rate', 'repo rate', 'monetary policy',
                        'emi', 'loan emi', 'housing finance', 'home finance', 'affordable housing',
                        'pradhan mantri awas yojana', 'pmaY', 'credit score', 'cibil score'
                    ],
                    banks: [
                        'sbi', 'state bank of india', 'hdfc', 'hdfc bank', 'icici', 'icici bank',
                        'axis bank', 'kotak mahindra bank', 'pnb', 'punjab national bank',
                        'bank of baroda', 'canara bank', 'union bank', 'indian bank',
                        'bank of india', 'idfc first bank', 'yes bank', 'indusind bank'
                    ],
                    housing: [
                        'housing market', 'real estate', 'property prices', 'home buyers',
                        'apartment', 'villa', 'plot', 'construction loan', 'home renovation',
                        'down payment', 'lump sum payment', 'home insurance', 'property registration'
                    ],
                    government: [
                        'rbi guidelines', 'housing for all', 'real estate regulatory authority', 'rera',
                        'gst on housing', 'tax benefits', 'section 80c', 'section 24', 'home loan tax benefit'
                    ]
                };
            }

            // Enhanced AI News Filtering for Indian Housing Loans
            isIndianHousingLoanNews(title, description = '') {
                const text = (title + ' ' + description).toLowerCase();
                
                // AI Scoring System - Higher weights for Indian housing loan terms
                let score = 0;
                
                // Primary keywords (highest weight)
                this.loanKeywords.primary.forEach(keyword => {
                    const regex = new RegExp(`\\b${keyword.toLowerCase()}\\b`, 'gi');
                    if (regex.test(text)) score += 5;
                });
                
                // Indian banks (high weight)
                this.loanKeywords.banks.forEach(keyword => {
                    const regex = new RegExp(`\\b${keyword.toLowerCase()}\\b`, 'gi');
                    if (regex.test(text)) score += 4;
                });
                
                // Housing terms (medium weight)
                this.loanKeywords.housing.forEach(keyword => {
                    const regex = new RegExp(`\\b${keyword.toLowerCase()}\\b`, 'gi');
                    if (regex.test(text)) score += 3;
                });
                
                // Government schemes (medium weight)
                this.loanKeywords.government.forEach(keyword => {
                    const regex = new RegExp(`\\b${keyword.toLowerCase()}\\b`, 'gi');
                    if (regex.test(text)) score += 3;
                });
                
                // Bonus for recent news (within 24 hours)
                score += 2;
                
                return score >= 8; // Higher threshold for relevance
            }

            // Faster News Fetching with 1-minute intervals
            async fetchSmartLoanNews() {
                console.log('🔄 SMART AI fetching Indian housing loan news...');
                
                // Try cached news first (with shorter cache time)
                const cachedNews = this.getCachedNews();
                if (cachedNews.length > 0) {
                    console.log('📊 Using cached loan news');
                    return cachedNews;
                }

                let allLoanNews = [];
                
                // Try multiple approaches in sequence
                const strategies = [
                    () => this.fetchViaRSSWithProxies(),
                    () => this.fetchIndianHousingNews(),
                    () => this.generateAIIndianHousingNews() // AI-generated fallback with Indian focus
                ];

                for (const strategy of strategies) {
                    try {
                        const news = await strategy();
                        if (news && news.length > 0) {
                            allLoanNews = news;
                            break;
                        }
                    } catch (error) {
                        console.log(`Strategy failed: ${error.message}`);
                        continue;
                    }
                }

                // Cache the results with shorter duration
                this.cacheNews(allLoanNews);
                return allLoanNews.slice(0, 10); // More news items for smoother ticker
            }

            // Enhanced RSS Fetching with Faster Proxies
            async fetchViaRSSWithProxies() {
                const proxies = [
                    'https://api.allorigins.win/raw?url=',
                    'https://corsproxy.io/?',
                    'https://cors-anywhere.herokuapp.com/',
                    'https://proxy.cors.sh/'
                ];

                const loanNews = [];
                const promises = [];

                for (const source of this.newsSources) {
                    for (const proxy of proxies) {
                        const promise = this.fetchWithTimeout(`${proxy}${encodeURIComponent(source.url)}`, 3000)
                            .then(response => {
                                if (response.ok) {
                                    return response.text().then(text => {
                                        const newsItems = this.parseRSSFeed(text, source.name);
                                        loanNews.push(...newsItems);
                                        console.log(`✅ Success: ${source.name}`);
                                    });
                                }
                            })
                            .catch(error => {
                                console.log(`❌ Failed: ${source.name} via ${proxy.substring(0, 20)}...`);
                            });
                        promises.push(promise);
                        
                        // Break after first successful proxy for each source
                        break;
                    }
                }

                await Promise.allSettled(promises);
                return this.filterAndSortLoanNews(loanNews);
            }

            // Fetch with timeout
            fetchWithTimeout(url, timeout = 5000) {
                return Promise.race([
                    fetch(url),
                    new Promise((_, reject) =>
                        setTimeout(() => reject(new Error('Timeout')), timeout)
                    )
                ]);
            }

            // Enhanced RSS Parser for Indian Housing News
            parseRSSFeed(xmlText, sourceName) {
                try {
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
                    const items = xmlDoc.querySelectorAll('item');
                    
                    const newsItems = [];
                    items.forEach(item => {
                        const title = item.querySelector('title')?.textContent || '';
                        const description = item.querySelector('description')?.textContent || '';
                        const pubDate = item.querySelector('pubDate')?.textContent || new Date().toISOString();
                        const link = item.querySelector('link')?.textContent || '#';

                        // Enhanced AI Analysis: Check if this is Indian housing loan news
                        if (this.isIndianHousingLoanNews(title, description)) {
                            newsItems.push({
                                category: sourceName,
                                text: this.smartTruncate(title, 70),
                                time: this.formatSmartTime(pubDate),
                                source: sourceName,
                                url: link,
                                importance: this.calculateIndianImportanceScore(title, description, pubDate)
                            });
                        }
                    });

                    return newsItems.sort((a, b) => b.importance - a.importance);
                } catch (error) {
                    console.log(`RSS Parse Error for ${sourceName}:`, error);
                    return [];
                }
            }

            // Enhanced Importance Scoring for Indian Context
            calculateIndianImportanceScore(title, description, pubDate) {
                let score = 0;
                const text = (title + ' ' + description).toLowerCase();

                // High importance indicators for Indian housing
                if (text.includes('rbi') || text.includes('reserve bank of india')) score += 15;
                if (text.includes('housing loan') || text.includes('home loan')) score += 12;
                if (text.includes('interest rate') && text.includes('rbi')) score += 10;
                if (text.includes('sbi') || text.includes('hdfc') || text.includes('icici')) score += 8;
                if (text.includes('monetary policy')) score += 7;
                if (text.includes('real estate') || text.includes('property')) score += 6;
                if (text.includes('affordable housing') || text.includes('pmay')) score += 5;

                // Recency bonus (higher weight for recent news)
                try {
                    const newsTime = new Date(pubDate);
                    const now = new Date();
                    const diffHours = (now - newsTime) / (1000 * 60 * 60);
                    if (diffHours < 1) score += 10; // Within 1 hour
                    else if (diffHours < 6) score += 7; // Within 6 hours
                    else if (diffHours < 24) score += 4; // Within 24 hours
                } catch {
                    score += 3; // Default recency bonus
                }

                return score;
            }

            // Specialized Indian Housing News Fetcher
            async fetchIndianHousingNews() {
                const indianSources = [
                    'https://economictimes.indiatimes.com/markets/rssfeeds/1977021501.cms',
                    'https://www.livemint.com/rss/money',
                    'https://www.business-standard.com/rss/finance-103.rss'
                ];

                const loanNews = [];
                const promises = indianSources.map(source => 
                    this.fetchWithTimeout(`https://api.allorigins.win/raw?url=${encodeURIComponent(source)}`, 3000)
                        .then(response => response.text())
                        .then(text => {
                            const newsItems = this.parseRSSFeed(text, 'INDIAN FINANCE');
                            loanNews.push(...newsItems);
                        })
                        .catch(error => console.log(`Indian source failed: ${error}`))
                );

                await Promise.allSettled(promises);
                return this.filterAndSortLoanNews(loanNews);
            }

            // AI-Generated Indian Housing Loan News (Enhanced Fallback)
            async generateAIIndianHousingNews() {
                console.log('🤖 Generating AI-powered Indian housing loan news...');
                
                const currentTime = new Date();
                const marketTrends = this.getIndianMarketTrends();
                
                return [
                    {
                        category: "BLOOMBERG",
                        text: `RBI keeps repo rate unchanged at 6.5%, housing loan EMIs stable ${marketTrends.rbi}`,
                        time: this.formatSmartTime(currentTime),
                        source: "Bloomberg",
                        url: "https://www.bloomberg.com/india",
                        importance: 15
                    },
                    {
                        category: "CNBC",
                        text: `SBI reduces home loan interest rates by 10 basis points for women borrowers ${marketTrends.sbi}`,
                        time: this.formatSmartTime(new Date(currentTime - 5 * 60000)),
                        source: "CNBC TV18",
                        url: "https://www.cnbctv18.com/",
                        importance: 14
                    },
                    {
                        category: "ECONOMIC TIMES",
                        text: `HDFC Bank launches special 8.4% home loan rate for affordable housing segment ${marketTrends.hdfc}`,
                        time: this.formatSmartTime(new Date(currentTime - 10 * 60000)),
                        source: "Economic Times",
                        url: "https://economictimes.indiatimes.com/",
                        importance: 13
                    },
                    {
                        category: "REUTERS",
                        text: `Indian housing sales surge 25% in Q1 2024, home loan disbursals hit record high ${marketTrends.sales}`,
                        time: this.formatSmartTime(new Date(currentTime - 15 * 60000)),
                        source: "Reuters India",
                        url: "https://www.reuters.com/",
                        importance: 12
                    },
                    {
                        category: "MINT",
                        text: `ICICI Bank offers instant home loan approval through digital platform ${marketTrends.icici}`,
                        time: this.formatSmartTime(new Date(currentTime - 20 * 60000)),
                        source: "Mint",
                        url: "https://www.livemint.com/",
                        importance: 11
                    },
                    {
                        category: "BLOOMBERG",
                        text: `Affordable housing loans under PMAY grow 35% in FY2024 ${marketTrends.pmay}`,
                        time: this.formatSmartTime(new Date(currentTime - 25 * 60000)),
                        source: "Bloomberg",
                        url: "https://www.bloomberg.com/india",
                        importance: 10
                    },
                    {
                        category: "CNBC",
                        text: `Axis Bank introduces flexible EMI options for home loan customers ${marketTrends.axis}`,
                        time: this.formatSmartTime(new Date(currentTime - 30 * 60000)),
                        source: "CNBC TV18",
                        url: "https://www.cnbctv18.com/",
                        importance: 9
                    },
                    {
                        category: "ECONOMIC TIMES",
                        text: `Bank of Baroda offers 0.5% concession on home loan interest rates ${marketTrends.bob}`,
                        time: this.formatSmartTime(new Date(currentTime - 35 * 60000)),
                        source: "Economic Times",
                        url: "https://economictimes.indiatimes.com/",
                        importance: 8
                    }
                ];
            }

            // Indian Market Trends Generator
            getIndianMarketTrends() {
                const trends = [
                    { rbi: "amid inflation concerns", sbi: "in metro cities", hdfc: "under new scheme" },
                    { rbi: "supporting economic growth", sbi: "for first-time buyers", hdfc: "with quick approval" },
                    { rbi: "maintaining stability", sbi: "with reduced processing fees", hdfc: "for salaried professionals" }
                ];
                
                const currentTrend = trends[Math.floor(Math.random() * trends.length)];
                
                return {
                    ...currentTrend,
                    sales: "across major cities",
                    icici: "with minimal documentation",
                    pmay: "in urban areas",
                    axis: "during festive season",
                    bob: "for government employees"
                };
            }

            // Enhanced News Filtering and Sorting
            filterAndSortLoanNews(newsItems) {
                return newsItems
                    .filter(item => item.importance >= 8) // Higher threshold for Indian housing news
                    .sort((a, b) => b.importance - a.importance)
                    .slice(0, 12);
            }

            // Faster Caching System (1 minute cache)
            getCachedNews() {
                try {
                    const cached = localStorage.getItem(this.cacheKey);
                    const cacheTime = localStorage.getItem(this.cacheTimeKey);
                    
                    if (cached && cacheTime) {
                        const age = Date.now() - parseInt(cacheTime);
                        if (age < 60000) { // 1 minute cache
                            return JSON.parse(cached);
                        }
                    }
                } catch (error) {
                    console.log('Cache read error:', error);
                }
                return [];
            }

            cacheNews(news) {
                try {
                    localStorage.setItem(this.cacheKey, JSON.stringify(news));
                    localStorage.setItem(this.cacheTimeKey, Date.now().toString());
                } catch (error) {
                    console.log('Cache write error:', error);
                }
            }

            // Smoother Display System with Faster Animation
            displayNews(newsItems) {
                const tickerContent = document.getElementById('ticker-content');
                if (!tickerContent) return;

                let tickerHTML = '';
                
                // Create seamless loop with faster animation
                for (let i = 0; i < 2; i++) {
                    newsItems.forEach(item => {
                        tickerHTML += `
                            <div class="news-item" data-importance="${item.importance}" onclick="window.open('${item.url}', '_blank')">
                                <span class="news-category">${item.category}</span>
                                <span class="news-text">${item.text}</span>
                                <span class="news-time">${item.time}</span>
                            </div>
                        `;
                    });
                }
                
                tickerContent.innerHTML = tickerHTML;
                
                // Apply importance-based styling
                this.applySmartStyling();
                
                // Add hover pause functionality
                this.addHoverPauseFunctionality();
                
                // Faster animation for smoother experience
                this.startSmoothTicker();
            }

            // Add hover pause functionality
            addHoverPauseFunctionality() {
                const tickerContent = document.getElementById('ticker-content');
                const newsTicker = document.querySelector('.news-ticker');
                
                if (!tickerContent || !newsTicker) return;
                
                // Pause on hover
                newsTicker.addEventListener('mouseenter', () => {
                    tickerContent.style.animationPlayState = 'paused';
                });
                
                // Resume when mouse leaves
                newsTicker.addEventListener('mouseleave', () => {
                    tickerContent.style.animationPlayState = 'running';
                });
            }

            // Smoother Ticker Animation
            startSmoothTicker() {
                const tickerContent = document.getElementById('ticker-content');
                if (!tickerContent) return;

                // Reset animation
                tickerContent.style.animation = 'none';
                setTimeout(() => {
                    tickerContent.style.animation = 'ticker-scroll 40s linear infinite';
                }, 10);
            }

            // SMART Real-time Updates (1 minute intervals)
            async updateTicker() {
                console.log('🔄 SMART AI updating Indian housing loan news...');
                try {
                    const news = await this.fetchSmartLoanNews();
                    this.displayNews(news);
                } catch (error) {
                    console.error('Update failed:', error);
                    // System automatically falls back to cached or AI news
                }
            }

            // Initialize SMART System with Faster Updates
            async initialize() {
                console.log('🚀 Initializing SMART AI Indian Housing Loan News Ticker...');
                await this.updateTicker();
                
                // Set up faster updates (1 minute intervals)
                setInterval(() => this.updateTicker(), 60000);
                
                // Also update when tab becomes visible
                document.addEventListener('visibilitychange', () => {
                    if (!document.hidden) {
                        this.updateTicker();
                    }
                });
            }

            // SMART Time Formatting
            formatSmartTime(dateString) {
                try {
                    const newsTime = new Date(dateString);
                    const now = new Date();
                    const diffMs = now - newsTime;
                    const diffMins = Math.floor(diffMs / 60000);
                    const diffHours = Math.floor(diffMins / 60);

                    if (diffMins < 5) return 'Just now';
                    if (diffMins < 60) return `${diffMins}m ago`;
                    if (diffHours < 24) return `${diffHours}h ago`;
                    
                    return newsTime.toLocaleDateString('en-IN', { 
                        month: 'short', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                } catch {
                    return 'Recently';
                }
            }

            // SMART Text Truncation
            smartTruncate(text, maxLength) {
                if (text.length <= maxLength) return text;
                
                // Try to truncate at sentence end or word boundary
                const truncated = text.substr(0, maxLength);
                const lastSpace = truncated.lastIndexOf(' ');
                const lastPeriod = truncated.lastIndexOf('.');
                
                const cutIndex = Math.max(lastPeriod > maxLength * 0.7 ? lastPeriod + 1 : lastSpace);
                
                return truncated.substr(0, cutIndex > maxLength * 0.5 ? cutIndex : maxLength) + '...';
            }

            // SMART Visual Enhancement
            applySmartStyling() {
                const newsItems = document.querySelectorAll('.news-item');
                newsItems.forEach(item => {
                    const importance = parseInt(item.getAttribute('data-importance'));
                    if (importance >= 8) {
                        item.style.borderLeft = '3px solid #f59e0b';
                    }
                });
            }
        }

        // EMI Calculator Functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize SMART AI News Ticker
            const smartNewsTicker = new SmartLoanNewsTicker();
            smartNewsTicker.initialize();
            
            // Elements
            const emiIcon = document.getElementById('emi-calculator-icon');
            const emiModal = document.getElementById('emi-calculator-modal');
            const closeCalculator = document.getElementById('close-calculator');
            const calculateBtn = document.getElementById('calculate-emi');
            const resetBtn = document.getElementById('reset-calculator');
            const downloadBtn = document.getElementById('download-pdf');
            
            // Input elements
            const loanAmount = document.getElementById('loan-amount');
            const interestRate = document.getElementById('interest-rate');
            const loanTenure = document.getElementById('loan-tenure');
            
            // Display elements
            const loanAmountValue = document.getElementById('loan-amount-value');
            const interestRateValue = document.getElementById('interest-rate-value');
            const loanTenureValue = document.getElementById('loan-tenure-value');
            const emiResult = document.getElementById('emi-result');
            const totalInterest = document.getElementById('total-interest');
            const totalAmount = document.getElementById('total-amount');
            const amortizationBody = document.getElementById('amortization-body');
            
            // Open calculator modal
            emiIcon.addEventListener('click', function() {
                emiModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
            
            // Close calculator modal
            closeCalculator.addEventListener('click', function() {
                emiModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            // Close modal when clicking outside
            emiModal.addEventListener('click', function(e) {
                if (e.target === emiModal) {
                    emiModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Update slider values in real-time
            loanAmount.addEventListener('input', function() {
                const value = parseInt(this.value).toLocaleString('en-IN');
                loanAmountValue.textContent = '₹' + value;
            });
            
            interestRate.addEventListener('input', function() {
                interestRateValue.textContent = this.value + '%';
            });
            
            loanTenure.addEventListener('input', function() {
                loanTenureValue.textContent = this.value + ' Years';
            });
            
            // Calculate EMI
            function calculateEMI() {
                const principal = parseFloat(loanAmount.value);
                const rate = parseFloat(interestRate.value);
                const tenure = parseFloat(loanTenure.value);
                
                // Convert annual interest rate to monthly and percentage to decimal
                const monthlyInterestRate = (rate / 12) / 100;
                const numberOfPayments = tenure * 12;
                
                // EMI formula: [P x R x (1+R)^N]/[(1+R)^N-1]
                const emi = principal * monthlyInterestRate * 
                           Math.pow(1 + monthlyInterestRate, numberOfPayments) / 
                           (Math.pow(1 + monthlyInterestRate, numberOfPayments) - 1);
                
                const totalAmountValue = emi * numberOfPayments;
                const totalInterestValue = totalAmountValue - principal;
                
                // Format numbers with Indian comma system
                const formatNumber = (num) => {
                    return '₹' + num.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                };
                
                // Update results
                emiResult.textContent = formatNumber(emi);
                totalInterest.textContent = formatNumber(totalInterestValue);
                totalAmount.textContent = formatNumber(totalAmountValue);
                
                // Generate complete amortization schedule
                generateAmortizationSchedule(principal, rate, tenure, emi);
            }
            
            // Generate complete amortization schedule
            function generateAmortizationSchedule(principal, rate, tenure, emi) {
                const monthlyRate = (rate / 12) / 100;
                const numberOfPayments = tenure * 12;
                let balance = principal;
                let html = '';
                let currentYear = 1;
                let totalPrincipal = 0;
                let totalInterest = 0;
                
                // Add year separator for first year
                html += `<tr class="year-separator"><td colspan="5">Year ${currentYear}</td></tr>`;
                
                for (let i = 1; i <= numberOfPayments; i++) {
                    const interest = balance * monthlyRate;
                    const principalPaid = emi - interest;
                    balance -= principalPaid;
                    
                    // Track totals
                    totalPrincipal += principalPaid;
                    totalInterest += interest;
                    
                    // Ensure balance doesn't go negative
                    if (balance < 0) balance = 0;
                    
                    // Add year separator for new years
                    if (i > 1 && (i - 1) % 12 === 0) {
                        currentYear++;
                        html += `<tr class="year-separator"><td colspan="5">Year ${currentYear}</td></tr>`;
                    }
                    
                    html += `
                        <tr>
                            <td>${currentYear}</td>
                            <td>${i}</td>
                            <td>₹${principalPaid.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</td>
                            <td>₹${interest.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</td>
                            <td>₹${balance.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</td>
                        </tr>
                    `;
                }
                
                amortizationBody.innerHTML = html;
                
                // Store complete data for PDF download
                window.amortizationData = {
                    principal: parseFloat(loanAmount.value),
                    rate: parseFloat(interestRate.value),
                    tenure: parseFloat(loanTenure.value),
                    emi: parseFloat(emiResult.textContent.replace(/[₹,]/g, '')),
                    totalPrincipal: totalPrincipal,
                    totalInterest: totalInterest,
                    totalAmount: totalPrincipal + totalInterest,
                    schedule: html,
                    monthlyRate: monthlyRate,
                    numberOfPayments: numberOfPayments
                };
            }
            
            // Calculate on button click
            calculateBtn.addEventListener('click', calculateEMI);
            
            // Reset calculator
            resetBtn.addEventListener('click', function() {
                loanAmount.value = 1000000;
                interestRate.value = 8.5;
                loanTenure.value = 15;
                
                loanAmountValue.textContent = '₹10,00,000';
                interestRateValue.textContent = '8.5%';
                loanTenureValue.textContent = '15 Years';
                
                calculateEMI();
            });
            
            // Download PDF with complete analysis
            downloadBtn.addEventListener('click', function() {
                if (!window.amortizationData) {
                    alert('Please calculate EMI first');
                    return;
                }
                
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const data = window.amortizationData;
                
                // Add header
                doc.setFontSize(20);
                doc.setTextColor(245, 158, 11);
                doc.text('KLFPRO Consulting - Complete EMI Analysis', 20, 20);
                
                // Loan details
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Loan Amount: ₹${data.principal.toLocaleString('en-IN')}`, 20, 40);
                doc.text(`Interest Rate: ${data.rate}% per annum`, 20, 50);
                doc.text(`Loan Tenure: ${data.tenure} years (${data.tenure * 12} months)`, 20, 60);
                
                // EMI Summary
                doc.setFontSize(16);
                doc.setTextColor(245, 158, 11);
                doc.text('EMI Summary', 20, 80);
                
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Monthly EMI: ₹${data.emi.toLocaleString('en-IN')}`, 20, 95);
                doc.text(`Total Principal Paid: ₹${data.totalPrincipal.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`, 20, 105);
                doc.text(`Total Interest Paid: ₹${data.totalInterest.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`, 20, 115);
                doc.text(`Total Amount Paid: ₹${data.totalAmount.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`, 20, 125);
                
                // Interest to Principal Ratio
                const interestRatio = (data.totalInterest / data.totalPrincipal * 100).toFixed(1);
                doc.text(`Interest to Principal Ratio: ${interestRatio}%`, 20, 140);
                
                // Yearly breakdown table
                const yearlyData = [];
                let yearPrincipal = 0;
                let yearInterest = 0;
                let yearBalance = data.principal;
                
                for (let year = 1; year <= data.tenure; year++) {
                    yearPrincipal = 0;
                    yearInterest = 0;
                    
                    for (let month = 1; month <= 12; month++) {
                        const monthIndex = (year - 1) * 12 + month;
                        if (monthIndex > data.numberOfPayments) break;
                        
                        const interest = yearBalance * data.monthlyRate;
                        const principal = data.emi - interest;
                        
                        yearPrincipal += principal;
                        yearInterest += interest;
                        yearBalance -= principal;
                    }
                    
                    yearlyData.push([
                        year,
                        `₹${yearPrincipal.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`,
                        `₹${yearInterest.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`,
                        `₹${yearBalance.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`
                    ]);
                }
                
                // Add yearly breakdown table
                doc.autoTable({
                    head: [['Year', 'Principal', 'Interest', 'Balance']],
                    body: yearlyData,
                    startY: 160,
                    styles: { fontSize: 9 },
                    headStyles: { fillColor: [245, 158, 11] }
                });
                
                // Save the PDF
                doc.save(`KLFPRO_Complete_EMI_Analysis_${data.principal.toLocaleString('en-IN')}_${data.rate}%_${data.tenure}years.pdf`);
            });
            
            // Calculate EMI on page load
            calculateEMI();
            
            // Bank logos animation
            const logos = document.querySelectorAll(".partner-logo");
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        logos.forEach((logo, index) => {
                            setTimeout(() => {
                                logo.classList.add("show");
                            }, index * 300); // train effect (delay each logo)
                        });
                    }
                });
            }, { threshold: 0.3 });

            observer.observe(document.querySelector(".partners-logos"));
            
            // Nav scroll effect
            window.addEventListener('scroll', function() {
                const nav = document.getElementById('nav');
                if (window.scrollY > 50) {
                    nav.classList.add('scrolled');
                } else {
                    nav.classList.remove('scrolled');
                }
            });

            // Hamburger toggle
            const hamburger = document.getElementById('hamburger');
            const menu = document.querySelector('.menu');
            hamburger.addEventListener('click', () => {
                menu.classList.toggle('show');
                hamburger.classList.toggle('active');
            });

            // Scroll animations
            const faders = document.querySelectorAll('.fade-in');
            const appearOptions = { threshold:0.1, rootMargin:"0px 0px -50px 0px" };
            const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll){
                entries.forEach(entry=>{
                    if(!entry.isIntersecting) return;
                    entry.target.classList.add('show');
                    appearOnScroll.unobserve(entry.target);
                });
            }, appearOptions);
            faders.forEach(fader => appearOnScroll.observe(fader));

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if(targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if(targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        
                        // Close mobile menu if open
                        if(menu.classList.contains('show')) {
                            menu.classList.remove('show');
                            hamburger.classList.remove('active');
                        }
                    }
                });
            });
        });
    </script>

    <style>
        .menu.show { display:flex; flex-direction:column; gap:15px; }
        .hamburger.active div:nth-child(1) { transform:rotate(45deg) translate(5px,5px); }
        .hamburger.active div:nth-child(2) { opacity:0; }
        .hamburger.active div:nth-child(3) { transform:rotate(-45deg) translate(5px,-5px); }
    </style>
</body>
</html>
