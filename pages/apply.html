<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apply for Loan • KLFPRO Consulting</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ================= Global Styles ================= */
    * { margin:0; padding:0; box-sizing:border-box; scroll-behavior:smooth; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#fff8f0; color:#000; overflow-x:hidden; line-height:1.6; }
    a { text-decoration:none; color:inherit; transition: all 0.3s ease; }
    img { max-width:100%; display:block; }
    .container { max-width:1200px; margin:0 auto; padding:0 20px; }
    section { padding: 60px 0; }
    h2 { font-size: 2.5rem; margin-bottom: 20px; color: #f59e0b; text-align: center; }
    p { font-size: 1.1rem; margin-bottom: 15px; }

    /* ================= NAVIGATION ================= */
    .nav { background:#fff8f0; border-bottom:1px solid #f3e8df; padding:15px 0; position:sticky; top:0; z-index:1000; transition: all 0.3s ease; }
    .nav.scrolled { background:rgba(255,248,240,0.95); backdrop-filter: blur(10px); box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
    .nav-inner { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }
    .nav .logo { display:flex; align-items:center; gap:10px; font-weight:700; color:#000; font-size: 1.5rem; }
    .nav .logo img { width:45px; height:45px; border-radius:50%; }
    .nav .menu { display:flex; gap:25px; }
    .nav .menu a { padding:8px 4px; font-weight:600; color:#000; position:relative; font-size: 1.05rem; }
    .nav .menu a::after { content:''; position:absolute; bottom:0; left:0; width:0; height:2px; background:linear-gradient(90deg,#f59e0b,#fbbf24); transition:width 0.3s ease; }
    .nav .menu a.active::after, .nav .menu a:hover::after { width:100%; }
    .nav .menu a.active { color:#f59e0b; }
    .nav .menu a:hover { color:#fbbf24; }
    .nav .cta { background:linear-gradient(135deg,#f59e0b,#fbbf24); color:#000; padding:10px 25px; border-radius:8px; font-weight:700; transition: transform 0.3s, box-shadow 0.3s; }
    .nav .cta:hover { transform:translateY(-3px); box-shadow:0 6px 18px rgba(245,158,11,0.4); }

    /* Hamburger Menu */
    .hamburger { display:none; flex-direction: column; cursor:pointer; }
    .hamburger div { width:25px; height:3px; background:#000; margin:4px 0; transition: all 0.3s ease; }

    /* ================= HERO ================= */
    .apply-hero { position:relative; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover no-repeat; padding:150px 20px 100px; text-align:center; color:#fff; margin:20px 0; border-radius: 12px; }
    .apply-hero-content { max-width: 800px; margin: 0 auto; }
    .apply-hero h1 { font-size:3.2rem; margin-bottom:20px; font-weight:700; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }
    .apply-hero p { font-size:1.3rem; margin-bottom:30px; opacity: 0.9; }

    /* ================= LOAN APPLICATION FORM ================= */
    .apply-container { max-width: 900px; margin: 60px auto; padding: 0 20px; }
    
    /* Progress Steps */
    .progress-steps { display: flex; justify-content: space-between; margin-bottom: 40px; position: relative; }
    .progress-steps::before { content: ''; position: absolute; top: 15px; left: 0; width: 100%; height: 4px; background: #f3e8df; z-index: 1; }
    .progress-bar { position: absolute; top: 15px; left: 0; height: 4px; background: linear-gradient(90deg, #f59e0b, #fbbf24); z-index: 2; transition: width 0.5s ease; }
    .step { display: flex; flex-direction: column; align-items: center; position: relative; z-index: 3; }
    .step-number { width: 34px; height: 34px; border-radius: 50%; background: #f3e8df; display: flex; align-items: center; justify-content: center; font-weight: 700; margin-bottom: 10px; transition: all 0.3s ease; }
    .step.active .step-number { background: linear-gradient(135deg, #f59e0b, #fbbf24); color: #000; transform: scale(1.1); }
    .step-label { font-size: 0.9rem; font-weight: 600; color: #666; }
    .step.active .step-label { color: #f59e0b; }

    /* Form Container */
    .form-container { background: #fff; border-radius: 16px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); position: relative; overflow: hidden; }
    .form-container::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: linear-gradient(90deg, #f59e0b, #fbbf24); }

    /* Form Steps */
    .form-step { display: none; animation: fadeIn 0.5s ease; }
    .form-step.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    /* Form Elements */
    .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px; }
    .form-group { margin-bottom: 20px; }
    .form-group.full-width { grid-column: 1 / -1; }
    .form-group label { display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 600; }
    .required-field::after { content: " *"; color: #e53e3e; }
    .form-control { width: 100%; padding: 12px 15px; border-radius: 8px; border: 1px solid #f3e8df; background: #fff; color: #000; font-size: 16px; transition: 0.3s; font-family: inherit; }
    .form-control:focus { border-color: #fbbf24; box-shadow: 0 0 8px rgba(251,191,36,0.4); outline: none; }
    .form-control.error { border-color: #e53e3e; }
    .error-message { color: #e53e3e; font-size: 0.85rem; margin-top: 5px; display: none; }
    textarea.form-control { min-height: 120px; resize: vertical; }
    select.form-control { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f59e0b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 15px center; background-size: 16px; }

    /* Loan Amount Slider */
    .loan-amount-container { margin: 20px 0 30px; }
    .loan-amount-display { font-size: 2rem; font-weight: 700; color: #f59e0b; text-align: center; margin-bottom: 15px; }
    .loan-amount-slider { width: 100%; height: 8px; -webkit-appearance: none; appearance: none; background: #f3e8df; border-radius: 4px; outline: none; }
    .loan-amount-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b, #fbbf24); cursor: pointer; box-shadow: 0 4px 8px rgba(245,158,11,0.3); }
    .loan-amount-slider::-moz-range-thumb { width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b, #fbbf24); cursor: pointer; border: none; box-shadow: 0 4px 8px rgba(245,158,11,0.3); }
    .loan-amount-labels { display: flex; justify-content: space-between; margin-top: 10px; color: #666; font-size: 0.9rem; }

    /* Document Upload */
    .upload-area { border: 2px dashed #f3e8df; border-radius: 8px; padding: 30px; text-align: center; margin: 20px 0; transition: all 0.3s ease; cursor: pointer; }
    .upload-area:hover { border-color: #fbbf24; background: rgba(251,191,36,0.05); }
    .upload-area i { font-size: 3rem; color: #f3e8df; margin-bottom: 15px; transition: color 0.3s ease; }
    .upload-area:hover i { color: #fbbf24; }
    .upload-area p { margin-bottom: 10px; }
    .upload-btn { display: inline-block; background: linear-gradient(135deg, #f59e0b, #fbbf24); color: #000; padding: 10px 20px; border-radius: 6px; font-weight: 600; margin-top: 10px; transition: all 0.3s ease; }
    .upload-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(245,158,11,0.3); }

    /* Document Requirements */
    .doc-requirements { background: #f9f5f0; border-radius: 8px; padding: 20px; margin-top: 20px; }
    .doc-requirements h4 { color: #f59e0b; margin-bottom: 15px; }
    .doc-requirements ul { list-style: none; }
    .doc-requirements li { margin-bottom: 8px; padding-left: 25px; position: relative; }
    .doc-requirements li:before { content: '✓'; color: #f59e0b; font-weight: bold; position: absolute; left: 0; }

    /* Google Form Section */
    .google-form-section { text-align: center; padding: 30px; background: #f9f5f0; border-radius: 8px; margin: 20px 0; }
    .google-form-section h3 { color: #f59e0b; margin-bottom: 15px; }
    .google-form-section p { margin-bottom: 20px; color: #666; }

    /* Form Navigation */
    .form-navigation { display: flex; justify-content: space-between; margin-top: 30px; }
    .btn { background: linear-gradient(135deg, #f59e0b, #fbbf24); color: #000; border: none; padding: 12px 25px; border-radius: 8px; font-weight: 700; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; }
    .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(251,191,36,0.4); }
    .btn:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }
    .btn-outline { background: transparent; border: 2px solid #f3e8df; color: #666; }
    .btn-outline:hover { border-color: #fbbf24; color: #f59e0b; box-shadow: none; transform: translateY(-3px); }

    /* Success Message */
    .success-message { text-align: center; padding: 40px; display: none; }
    .success-message i { font-size: 4rem; color: #f59e0b; margin-bottom: 20px; }
    .success-message h3 { color: #f59e0b; margin-bottom: 15px; }
    .success-message p { margin-bottom: 25px; }

    /* Loading Spinner */
    .spinner { display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,.3); border-radius: 50%; border-top-color: #000; animation: spin 1s ease-in-out infinite; margin-right: 10px; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ================= FOOTER ================= */
    footer { background:#1a1a1a; color:#fff; padding:60px 0 30px; margin-top: 60px; }
    .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 40px; }
    .footer-column h3 { color: #f59e0b; margin-bottom: 20px; font-size: 1.3rem; }
    .footer-column ul { list-style: none; }
    .footer-column ul li { margin-bottom: 10px; }
    .footer-column a { color: #ccc; transition: color 0.3s ease; }
    .footer-column a:hover { color: #f59e0b; }
    .footer-bottom { text-align: center; padding-top: 30px; border-top: 1px solid #333; color: #999; font-size: 0.9rem; }
    .social-links { display: flex; gap: 15px; margin-top: 20px; }
    .social-links a { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: #333; color: #fff; transition: all 0.3s ease; }
    .social-links a:hover { background: #f59e0b; transform: translateY(-3px); }

    /* ================= MEDIA QUERIES ================= */
    @media(max-width:768px) { 
        .nav .menu { display:none; width:100%; flex-direction:column; background:#fff8f0; position:absolute; top:70px; left:0; padding:20px; border-top:1px solid #f3e8df; box-shadow:0 5px 10px rgba(0,0,0,0.05); } 
        .hamburger { display:flex; }
        .apply-hero h1 { font-size: 2.5rem; }
        .apply-hero p { font-size: 1.1rem; }
        .form-grid { grid-template-columns: 1fr; }
        .form-container { padding: 25px; }
        .progress-steps { flex-wrap: wrap; gap: 15px; }
        .step { flex: 1; min-width: 100px; }
    }

    /* Animation Classes */
    .fade-in { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
    .fade-in.show { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body>
  <!-- ================= NAVIGATION ================= -->
  <div class="nav" id="nav">
    <div class="nav-inner container">
      <a class="logo" href="../index.html">
        <img src="../assets/klflogos-removebg-preview.png" alt="KLFPRO Logo">
        <span>KLFPRO Consulting</span>
      </a>
      <div class="menu">
        <a href="../index.html#services">Services</a>
        <a href="../index.html#partners">Bank Partners</a>
        <a href="../index.html#how-it-works">How It Works</a>
        <a href="../index.html#benefits">Benefits</a>
        <a href="../index.html#testimonials">Testimonials</a>
        <a href="contact.html">Contact</a>
      </div>
      <a class="cta active" href="apply.html">Apply Now</a>
      <div class="hamburger" id="hamburger">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
  </div>

  <!-- ================= HERO ================= -->
  <section class="apply-hero fade-in">
    <div class="apply-hero-content">
      <h1>Apply for a Loan</h1>
      <p>Fill in your details and get matched with the best loan options from our banking partners</p>
    </div>
  </section>

  <!-- ================= LOAN APPLICATION FORM ================= -->
  <div class="apply-container fade-in">
    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="progress-bar" id="progressBar"></div>
      <div class="step active" data-step="1">
        <div class="step-number">1</div>
        <div class="step-label">Basic Info</div>
      </div>
      <div class="step" data-step="2">
        <div class="step-number">2</div>
        <div class="step-label">Loan Details</div>
      </div>
      <div class="step" data-step="3">
        <div class="step-number">3</div>
        <div class="step-label">Documents</div>
      </div>
      <div class="step" data-step="4">
        <div class="step-number">4</div>
        <div class="step-label">Review</div>
      </div>
    </div>

    <!-- Form Container -->
    <div class="form-container">
      <!-- Step 1: Basic Information -->
      <div class="form-step active" id="step1">
        <h2 style="text-align: left; margin-bottom: 25px;">Personal Information</h2>
        <p style="color: #666; margin-bottom: 20px; font-size: 0.9rem;"><span style="color: #e53e3e;">*</span> indicates required field</p>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="fullName" class="required-field">Full Name</label>
            <input type="text" id="fullName" class="form-control" required>
            <div class="error-message" id="fullNameError">Please enter your full name</div>
          </div>
          <div class="form-group">
            <label for="email" class="required-field">Email Address</label>
            <input type="email" id="email" class="form-control" required>
            <div class="error-message" id="emailError">Please enter a valid email address</div>
          </div>
          <div class="form-group">
            <label for="phone" class="required-field">Phone Number</label>
            <input type="tel" id="phone" class="form-control" required>
            <div class="error-message" id="phoneError">Please enter a valid phone number</div>
          </div>
          <div class="form-group">
            <label for="dob" class="required-field">Date of Birth</label>
            <input type="date" id="dob" class="form-control" required>
            <div class="error-message" id="dobError">Please select your date of birth</div>
          </div>
          <div class="form-group full-width">
            <label for="address" class="required-field">Residential Address</label>
            <textarea id="address" class="form-control" required></textarea>
            <div class="error-message" id="addressError">Please enter your residential address</div>
          </div>
        </div>
        <div class="form-navigation">
          <div></div> <!-- Empty div for spacing -->
          <button class="btn" id="step1Next" onclick="validateStep1()">Next <i class="fas fa-arrow-right"></i></button>
        </div>
      </div>

      <!-- Step 2: Loan Details -->
      <div class="form-step" id="step2">
        <h2 style="text-align: left; margin-bottom: 25px;">Loan Requirements</h2>
        <p style="color: #666; margin-bottom: 20px; font-size: 0.9rem;"><span style="color: #e53e3e;">*</span> indicates required field</p>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="loanType" class="required-field">Loan Type</label>
            <select id="loanType" class="form-control" required>
              <option value="">-- Select Loan Type --</option>
              <option value="home">Home Loan</option>
              <option value="business">Business Loan</option>
              <option value="personal">Personal Loan</option>
              <option value="education">Education Loan</option>
              <option value="vehicle">Vehicle Loan</option>
              <option value="property">Loan Against Property</option>
              <option value="msme">MSME Loan</option>
              <option value="virtual">Loan Against Virtual Unit</option>
            </select>
            <div class="error-message" id="loanTypeError">Please select a loan type</div>
          </div>
          <div class="form-group">
            <label for="employmentType" class="required-field">Employment Type</label>
            <select id="employmentType" class="form-control" required onchange="toggleDocumentSections()">
              <option value="">-- Select --</option>
              <option value="salaried">Salaried</option>
              <option value="self">Self-Employed</option>
            </select>
            <div class="error-message" id="employmentTypeError">Please select employment type</div>
          </div>
          <div class="form-group full-width">
            <label for="purpose">Loan Purpose (Optional)</label>
            <textarea id="purpose" class="form-control" placeholder="Briefly describe what you need the loan for"></textarea>
          </div>
        </div>
        
        <div class="loan-amount-container">
          <div class="loan-amount-display" id="loanAmountDisplay">₹5,00,000</div>
          <input type="range" min="50000" max="5000000" value="500000" step="50000" class="loan-amount-slider" id="loanAmountSlider">
          <div class="loan-amount-labels">
            <span>₹50,000</span>
            <span>₹50,00,000</span>
          </div>
        </div>
        
        <div class="form-navigation">
          <button class="btn btn-outline" onclick="prevStep(2)"><i class="fas fa-arrow-left"></i> Back</button>
          <button class="btn" id="step2Next" onclick="validateStep2()">Next <i class="fas fa-arrow-right"></i></button>
        </div>
      </div>

      <!-- Step 3: Document Upload -->
      <div class="form-step" id="step3">
        <h2 style="text-align: left; margin-bottom: 25px;">Document Upload</h2>
        
        <!-- Google Form Section -->
        <div class="google-form-section">
          <h3>Upload Your Documents</h3>
          <p>Please use our secure Google Form to upload your documents. This ensures your sensitive information is handled safely.</p>
          <button class="btn" onclick="openGoogleForm()" style="padding: 12px 30px;">
            <i class="fab fa-google"></i> Upload Documents via Google Form
          </button>
          <p style="margin-top: 15px; font-size: 0.9rem; color: #999;">After uploading your documents, please return to this page and click "Next" to continue.</p>
        </div>
        
        <!-- Document Requirements -->
        <div class="doc-requirements">
          <h4>Required Documents:</h4>
          <div id="salariedDocs" class="doc-section">
            <h5>For Salaried Individuals:</h5>
            <ul>
              <li>Identity Proof (Aadhaar, PAN, Passport, etc.)</li>
              <li>Address Proof (Utility bill, Rental agreement, etc.)</li>
              <li>Income Proof (Last 3 months salary slips)</li>
              <li>Bank Statements (Last 6 months)</li>
              <li>Employment Certificate</li>
            </ul>
          </div>
          <div id="selfDocs" class="doc-section" style="display: none;">
            <h5>For Self-Employed Individuals:</h5>
            <ul>
              <li>Identity Proof (Aadhaar, PAN, Passport, etc.)</li>
              <li>Address Proof (Utility bill, Rental agreement, etc.)</li>
              <li>Business Proof (GST, Shop Act License, etc.)</li>
              <li>Bank Statements (Last 2 years)</li>
              <li>Income Tax Returns (Last 3 years)</li>
              <li>Profit/Loss Statement & Balance Sheet</li>
            </ul>
          </div>
        </div>
        
        <div class="form-navigation">
          <button class="btn btn-outline" onclick="prevStep(3)"><i class="fas fa-arrow-left"></i> Back</button>
          <button class="btn" id="step3Next" onclick="validateStep3()">Next <i class="fas fa-arrow-right"></i></button>
        </div>
      </div>

      <!-- Step 4: Review and Submit -->
      <div class="form-step" id="step4">
        <h2 style="text-align: left; margin-bottom: 25px;">Review Your Application</h2>
        
        <div class="review-section" style="background: #f9f5f0; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
          <h3 style="color: #f59e0b; margin-bottom: 15px;">Application Summary</h3>
          <div id="reviewContent">
            <!-- Dynamically populated with application details -->
          </div>
        </div>
        
        <div class="form-group">
          <label>
            <input type="checkbox" id="termsAgree" required> 
            I agree to the <a href="#" style="color: #f59e0b;">Terms & Conditions</a> and authorize KLFPRO to share my information with banking partners for loan processing.
          </label>
          <div class="error-message" id="termsError">You must agree to the terms and conditions</div>
        </div>
        
        <div class="form-navigation">
          <button class="btn btn-outline" onclick="prevStep(4)"><i class="fas fa-arrow-left"></i> Back</button>
          <button class="btn" id="step4Submit" onclick="validateStep4()">Submit Application <i class="fas fa-paper-plane"></i></button>
        </div>
      </div>

      <!-- Success Message -->
      <div class="success-message" id="successMessage">
        <i class="fas fa-check-circle"></i>
        <h3>Application Submitted Successfully!</h3>
        <p>Thank you for applying with KLFPRO. Our loan specialist will contact you within 24 hours to discuss the best options available for you.</p>
        <p><strong>Application Reference:</strong> <span id="referenceNumber"></span></p>
        <button class="btn" onclick="window.location.href='../index.html'"><i class="fas fa-home"></i> Back to Home</button>
      </div>
    </div>
  </div>

  <!-- ================= FOOTER ================= -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>KLFPRO Consulting</h3>
          <p>Connecting borrowers with the best loan options from our extensive network of banking partners since 2015.</p>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
        <div class="footer-column">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="../index.html#services">Services</a></li>
            <li><a href="../index.html#partners">Bank Partners</a></li>
            <li><a href="../index.html#how-it-works">How It Works</a></li>
            <li><a href="../index.html#benefits">Benefits</a></li>
            <li><a href="../index.html#testimonials">Testimonials</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Contact Us</h3>
          <ul>
            <li><i class="fas fa-map-marker-alt"></i> OFFICE NO.1142, SAPZE ITECH PARK, GURUGAON</li>
            <li><i class="fas fa-phone"></i> +91 9711000680</li>
            <li><i class="fas fa-envelope"></i> info@klfpro.com</li>
            <li><i class="fas fa-clock"></i> Mon-Sat: 9AM - 6PM</li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 KLFPRO Consulting. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
      </div>
    </div>
  </footer>

  <script>
    // Nav scroll effect
    window.addEventListener('scroll', function() {
      const nav = document.getElementById('nav');
      if (window.scrollY > 50) {
        nav.classList.add('scrolled');
      } else {
        nav.classList.remove('scrolled');
      }
    });

    // Hamburger toggle
    const hamburger = document.getElementById('hamburger');
    const menu = document.querySelector('.menu');
    hamburger.addEventListener('click', () => {
      menu.classList.toggle('show');
      hamburger.classList.toggle('active');
    });

    // Scroll animations
    const faders = document.querySelectorAll('.fade-in');
    const appearOptions = { threshold:0.1, rootMargin:"0px 0px -50px 0px" };
    const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll){
      entries.forEach(entry=>{
        if(!entry.isIntersecting) return;
        entry.target.classList.add('show');
        appearOnScroll.unobserve(entry.target);
      });
    }, appearOptions);
    faders.forEach(fader => appearOnScroll.observe(fader));

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        if(targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if(targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 80,
            behavior: 'smooth'
          });
          
          // Close mobile menu if open
          if(menu.classList.contains('show')) {
            menu.classList.remove('show');
            hamburger.classList.remove('active');
          }
        }
      });
    });

    // Multi-step form functionality
    let currentStep = 1;
    const totalSteps = 4;

    // Update progress bar
    function updateProgressBar() {
      const progressBar = document.getElementById('progressBar');
      const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
      progressBar.style.width = `${progress}%`;
      
      // Update step indicators
      document.querySelectorAll('.step').forEach(step => {
        const stepNum = parseInt(step.getAttribute('data-step'));
        if (stepNum <= currentStep) {
          step.classList.add('active');
        } else {
          step.classList.remove('active');
        }
      });
    }

    // Toggle document sections based on employment type
    function toggleDocumentSections() {
      const employmentType = document.getElementById('employmentType').value;
      const salariedDocs = document.getElementById('salariedDocs');
      const selfDocs = document.getElementById('selfDocs');
      
      if (employmentType === 'salaried') {
        salariedDocs.style.display = 'block';
        selfDocs.style.display = 'none';
      } else if (employmentType === 'self') {
        salariedDocs.style.display = 'none';
        selfDocs.style.display = 'block';
      } else {
        salariedDocs.style.display = 'none';
        selfDocs.style.display = 'none';
      }
    }

    // Open Google Form in a new tab
    function openGoogleForm() {
      window.open('https://forms.gle/rnA4AUfy86x7nfRb7', '_blank');
    }

    // Clear error states
    function clearErrors() {
      document.querySelectorAll('.error-message').forEach(error => {
        error.style.display = 'none';
      });
      document.querySelectorAll('.form-control').forEach(input => {
        input.classList.remove('error');
      });
    }

    // Show error for specific field
    function showError(fieldId, errorId) {
      document.getElementById(fieldId).classList.add('error');
      document.getElementById(errorId).style.display = 'block';
    }

    // Validate Step 1: Personal Information
    function validateStep1() {
      clearErrors();
      let isValid = true;

      // Validate Full Name
      const fullName = document.getElementById('fullName').value.trim();
      if (!fullName) {
        showError('fullName', 'fullNameError');
        isValid = false;
      }

      // Validate Email
      const email = document.getElementById('email').value.trim();
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email || !emailRegex.test(email)) {
        showError('email', 'emailError');
        isValid = false;
      }

      // Validate Phone
      const phone = document.getElementById('phone').value.trim();
      const phoneRegex = /^[6-9]\d{9}$/;
      if (!phone || !phoneRegex.test(phone)) {
        showError('phone', 'phoneError');
        isValid = false;
      }

      // Validate Date of Birth
      const dob = document.getElementById('dob').value;
      if (!dob) {
        showError('dob', 'dobError');
        isValid = false;
      }

      // Validate Address
      const address = document.getElementById('address').value.trim();
      if (!address) {
        showError('address', 'addressError');
        isValid = false;
      }

      if (isValid) {
        nextStep(1);
      }
    }

    // Validate Step 2: Loan Details
    function validateStep2() {
      clearErrors();
      let isValid = true;

      // Validate Loan Type
      const loanType = document.getElementById('loanType').value;
      if (!loanType) {
        showError('loanType', 'loanTypeError');
        isValid = false;
      }

      // Validate Employment Type
      const employmentType = document.getElementById('employmentType').value;
      if (!employmentType) {
        showError('employmentType', 'employmentTypeError');
        isValid = false;
      }

      if (isValid) {
        nextStep(2);
      }
    }

    // Validate Step 3: Documents
    function validateStep3() {
      // We don't validate document uploads since they're done via Google Form
      nextStep(3);
    }

    // Validate Step 4: Review and Submit
    function validateStep4() {
      clearErrors();
      let isValid = true;

      // Validate Terms Agreement
      const termsAgree = document.getElementById('termsAgree').checked;
      if (!termsAgree) {
        document.getElementById('termsError').style.display = 'block';
        isValid = false;
      }

      if (isValid) {
        submitApplication();
      }
    }

    // Navigate to next step
    function nextStep(step) {
      if (step < totalSteps) {
        document.getElementById(`step${step}`).classList.remove('active');
        document.getElementById(`step${step + 1}`).classList.add('active');
        currentStep = step + 1;
        updateProgressBar();
        
        // Update document sections when moving to step 3
        if (step === 2) {
          toggleDocumentSections();
        }
        
        // Update review section on step 4
        if (step === 3) {
          updateReviewSection();
        }
      }
    }

    // Navigate to previous step
    function prevStep(step) {
      if (step > 1) {
        document.getElementById(`step${step}`).classList.remove('active');
        document.getElementById(`step${step - 1}`).classles.add('active');
        currentStep = step - 1;
        updateProgressBar();
      }
    }

    // Loan amount slider
    const loanAmountSlider = document.getElementById('loanAmountSlider');
    const loanAmountDisplay = document.getElementById('loanAmountDisplay');
    
    loanAmountSlider.addEventListener('input', function() {
      const value = parseInt(this.value);
      loanAmountDisplay.textContent = formatCurrency(value);
    });

    // Format currency in Indian numbering system
    function formatCurrency(amount) {
      return new Intl.NumberFormat('en-IN', {
        style: 'currency',
        currency: 'INR',
        maximumFractionDigits: 0
      }).format(amount);
    }

    // Update review section with application details
    function updateReviewSection() {
      const reviewContent = document.getElementById('reviewContent');
      const formData = {
        name: document.getElementById('fullName').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        dob: document.getElementById('dob').value,
        address: document.getElementById('address').value,
        loanType: document.getElementById('loanType').value,
        employmentType: document.getElementById('employmentType').value,
        purpose: document.getElementById('purpose').value,
        amount: document.getElementById('loanAmountSlider').value
      };
      
      const loanTypeLabels = {
        'home': 'Home Loan',
        'business': 'Business Loan',
        'personal': 'Personal Loan',
        'vehicle': 'Vehicle Loan',
        'property': 'Loan Against Property',
        'msme': 'MSME Loan',
        'virtual': 'Loan Against Virtual Unit'
      };
      
      reviewContent.innerHTML = `
        <p><strong>Name:</strong> ${formData.name}</p>
        <p><strong>Email:</strong> ${formData.email}</p>
        <p><strong>Phone:</strong> ${formData.phone}</p>
        <p><strong>Date of Birth:</strong> ${formData.dob}</p>
        <p><strong>Address:</strong> ${formData.address}</p>
        <p><strong>Loan Type:</strong> ${loanTypeLabels[formData.loanType] || formData.loanType}</p>
        <p><strong>Employment Type:</strong> ${formData.employmentType === 'salaried' ? 'Salaried' : 'Self-Employed'}</p>
        <p><strong>Loan Amount:</strong> ${formatCurrency(parseInt(formData.amount))}</p>
        <p><strong>Purpose:</strong> ${formData.purpose || 'Not specified'}</p>
        <p><strong>Documents:</strong> To be uploaded via Google Form</p>
      `;
    }

    // Generate a unique reference number
    function generateReferenceNumber() {
      const timestamp = Date.now().toString().slice(-6);
      const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
      return `KLF${timestamp}${random}`;
    }

    // Submit application to Google Form
    async function submitApplication() {
      const submitBtn = document.getElementById('step4Submit');
      const originalText = submitBtn.innerHTML;
      
      // Show loading state
      submitBtn.innerHTML = '<span class="spinner"></span> Submitting...';
      submitBtn.disabled = true;
      
      try {
        // Collect form data
        const formData = {
          name: document.getElementById('fullName').value,
          email: document.getElementById('email').value,
          phone: document.getElementById('phone').value,
          dob: document.getElementById('dob').value,
          address: document.getElementById('address').value,
          loanType: document.getElementById('loanType').value,
          employmentType: document.getElementById('employmentType').value,
          purpose: document.getElementById('purpose').value,
          amount: document.getElementById('loanAmountSlider').value,
          timestamp: new Date().toISOString(),
          reference: generateReferenceNumber()
        };
        
        // Prepare data for Google Form submission
        const loanTypeLabels = {
          'home': 'Home Loan',
          'business': 'Business Loan',
          'personal': 'Personal Loan',
          'vehicle': 'Vehicle Loan',
          'property': 'Loan Against Property',
          'msme': 'MSME Loan',
          'virtual': 'Loan Against Virtual Unit'
        };
        
        // This would be the actual submission to Google Forms
        // For demonstration, we'll simulate a successful submission
        await simulateGoogleFormSubmission(formData);
        
        // Show success message with reference number
        document.getElementById('step4').style.display = 'none';
        document.getElementById('successMessage').style.display = 'block';
        document.getElementById('referenceNumber').textContent = formData.reference;
        
        console.log('Application submitted successfully:', formData);
        
        // In a real implementation, you would send this data to your server
        // or directly to Google Forms using their API
        
      } catch (error) {
        console.error('Error submitting application:', error);
        alert('There was an error submitting your application. Please try again.');
        
        // Reset button state
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    }

    // Simulate Google Form submission (replace with actual implementation)
    function simulateGoogleFormSubmission(formData) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          // In a real implementation, you would:
          // 1. Use Google Forms API to submit the data
          // 2. Or send the data to your own server which then forwards to Google Forms
          // 3. Or use a service like Formspree or FormSubmit
          
          // For now, we'll just log the data and resolve
          console.log('Data to be sent to Google Forms:', formData);
          resolve();
        }, 1500);
      });
    }

    // Initialize
    updateProgressBar();
    
    // Add event listener to employment type dropdown
    document.getElementById('employmentType').addEventListener('change', toggleDocumentSections);

    // Add real-time validation for better UX
    document.getElementById('fullName').addEventListener('blur', function() {
      if (!this.value.trim()) {
        showError('fullName', 'fullNameError');
      }
    });

    document.getElementById('email').addEventListener('blur', function() {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!this.value.trim() || !emailRegex.test(this.value)) {
        showError('email', 'emailError');
      }
    });

    document.getElementById('phone').addEventListener('blur', function() {
      const phoneRegex = /^[6-9]\d{9}$/;
      if (!this.value.trim() || !phoneRegex.test(this.value)) {
        showError('phone', 'phoneError');
      }
    });
  </script>

  <style>
    .menu.show { display:flex; flex-direction:column; gap:15px; }
    .hamburger.active div:nth-child(1) { transform:rotate(45deg) translate(5px,5px); }
    .hamburger.active div:nth-child(2) { opacity:0; }
    .hamburger.active div:nth-child(3) { transform:rotate(-45deg) translate(5px,-5px); }
  </style>
</body>
</html>
